<!doctype html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PlanetForge (Vite + TS)</title>
  </head>
  <body>
    <canvas id="game"></canvas>
    <div id="hud" class="panel">
      <div><strong>PlanetForge MVP</strong></div>
      <div>Planet Lv <span id="pLv">1</span> • Territory: <span id="terr">200</span>u</div>
      <div>Money: <span id="money">0</span></div>
      <div>Basalt: <span id="basalt">0</span> • Energy: <span id="energy">0</span></div>
      <div>Moons: <span id="moons">0</span> (+<span id="bRate">0</span>/s) • Satellites: <span id="sats">0</span> (+<span id="eRate">0</span>/s)</div>
      <div>Ships — Drones: <span id="drCount">0</span> • Battleships: <span id="bsCount">0</span> • Missions: <span id="msCount">0</span></div>
      <div class="muted" style="margin-top:4px">R‑drag: pan • Wheel: zoom • <span class="kbd">H</span> shop • Click planet/buildings to manage • Drag from shop to place buildings • Right‑click to cancel placement • Click scraps for actions</div>
      <div class="row">
        <button id="shopBtn">Open Shop</button>
        <button id="fleetBtn">Fleet</button>
      </div>
    </div>

    <div id="shop" class="panel" style="display:none;">
      <h3>Shop</h3>
      <div class="muted">Build buildings & trade resources. Build ships in Fleet, then use scraps menu to collect.</div>
      <section>
        <strong>Build</strong>
        <div class="row">
          <div>Moon — +1 basalt/s/level</div>
          <div><span class="muted" id="moonCost">100</span><button id="startMoon">Select</button></div>
        </div>
        <div class="row">
          <div>Satellite — +1 energy/s/level</div>
          <div><span class="muted" id="satCost">120</span><button id="startSat">Select</button></div>
        </div>
      </section>
      <section>
        <strong>Trade</strong>
        <div class="row">
          <div>Basalt → money</div>
          <div><input id="sellBasaltAmt" type="number" min="0" step="1" placeholder="amount" /><button id="sellBasalt">Sell</button></div>
        </div>
        <div class="row">
          <div>Energy → money</div>
          <div><input id="sellEnergyAmt" type="number" min="0" step="1" placeholder="amount" /><button id="sellEnergy">Sell</button></div>
        </div>
        <div style="text-align:right; margin-top:6px"><button id="closeShop">Close</button></div>
      </section>
    </div>

    <div id="detailPanel" class="panel" style="display:none;">
      <div><strong id="panelTitle">Details</strong></div>
      <div class="row"><div>Level</div><div><span id="bLvl">1</span> / 10</div></div>
      <div class="row" id="rowProd"><div id="prodLabel">Prod</div><div><span id="bProd">+1</span></div></div>
      <div class="row"><div>Upgrade</div><div><button id="bUpgrade">Upgrade (<span id="bUpCost">—</span>)</button></div></div>
      <div class="row" id="rowDemo"><div>Demolish</div><div><button id="bDemo">Refund 75%</button></div></div>
      <div style="text-align:right; margin-top:6px"><button id="bClose">Close</button></div>
    </div>

    <div id="fleet" class="panel" style="display:none;">
      <div><strong>Fleet</strong></div>
      <div class="row"><div>Drone (25$, 1s)</div><div><button id="qDrone">Build</button></div></div>
      <div class="row"><div>Battleship (100$, 2s)</div><div><button id="qBattle">Build</button></div></div>
      <div class="row"><div>Queue</div><div><span id="queueLen">0</span> in progress</div></div>
      <div class="row"><small class="muted">Ships are sent from the scraps menu.</small></div>
      <div class="row" style="justify-content:flex-end"><button id="fleetClose">Close</button></div>
    </div>

    <div id="scrapMenu" style="display:none;">
      <div class="ring"></div>
      <div class="btn" id="scrapCollectBtn" title="Collect Resources">
        <svg width="28" height="28" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="#384fff" stroke-width="2"/><circle cx="12" cy="12" r="3" fill="#ff3d3d"/><path d="M12 3v3M12 18v3M3 12h3M18 12h3" stroke="#384fff" stroke-width="2"/></svg>
      </div>
      <div class="label">Collect Resources</div>
    </div>

    <div id="collect" class="panel" style="display:none; min-width:320px;">
      <div><strong>Collect from Scrap</strong></div>
      <div class="muted" id="collectInfo">—</div>
      <div class="row"><div>Drones</div><div><input id="colD" type="number" min="0" step="1" value="0"></div></div>
      <div class="row"><div>Battleships</div><div><input id="colB" type="number" min="0" step="1" value="0"></div></div>
      <div class="row"><div>Capacity</div><div><span id="cap">0</span></div></div>
      <div class="row"><div>ETA</div><div><span id="eta">—</span></div></div>
      <div class="row" style="justify-content:flex-end"><button id="sendFleet">Send</button><button id="closeCollect">Close</button></div>
    </div>

    <div id="toast" class="toast" style="display:none;"></div>

    <link rel="stylesheet" href="/styles.css" />
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
